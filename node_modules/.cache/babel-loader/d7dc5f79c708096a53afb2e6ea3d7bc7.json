{"ast":null,"code":"import _objectSpread from \"/Users/macbookpro/Documents/projects/task-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/macbookpro/Documents/projects/task-management-fe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport axios from \"axios\";\nimport { reactive } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from 'vuex'; // import { api_url } from '../../utils/const';\n\nexport default {\n  setup: function setup() {\n    var form = reactive({\n      email: \"\",\n      password: \"\"\n    });\n    var router = useRouter();\n    var store = useStore();\n\n    var handleSubmit = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var response, token, trackCounter;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(form);\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.post(\"http://127.0.0.1:8000/api/login\", _objectSpread({}, form));\n\n              case 4:\n                response = _context.sent;\n                token = response.data.token; // console.log(response.data.user);\n\n                sessionStorage.setItem(\"token\", token);\n                store.dispatch(\"handleUserLogin\", response.data.user);\n                trackCounter = computed(function () {\n                  return store.getters.getCounter;\n                }); // router.push({name: \"Dashboard\"});\n\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 11]]);\n      }));\n\n      return function handleSubmit() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return {\n      form: form,\n      handleSubmit: handleSubmit\n    };\n  }\n};","map":{"version":3,"mappings":";;;AAsGA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,KAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,QAAT,QAAyB,MAAzB,C,CACA;;AAEA,eAAe;AACbC,OADa,mBACL;AACN,QAAMC,IAAG,GAAIJ,QAAQ,CAAC;AACpBK,WAAK,EAAE,EADa;AAEpBC,cAAQ,EAAE;AAFU,KAAD,CAArB;AAKA,QAAMC,MAAK,GAAIN,SAAS,EAAxB;AACA,QAAMO,KAAI,GAAIN,QAAQ,EAAtB;;AAEA,QAAMO,YAAW;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBC,uBAAO,CAACC,GAAR,CAAYP,IAAZ;AADmB;AAAA;AAAA,uBAGML,KAAK,CAACa,IAAN,CAAW,iCAAX,oBAClBR,IADkB,EAHN;;AAAA;AAGXS,wBAHW;AAMXC,qBANW,GAMHD,QAAQ,CAACE,IAAT,CAAcD,KANX,EAQjB;;AAEAE,8BAAc,CAACC,OAAf,CAAuB,OAAvB,EAAgCH,KAAhC;AAEAN,qBAAK,CAACU,QAAN,CAAe,iBAAf,EAAkCL,QAAQ,CAACE,IAAT,CAAcI,IAAhD;AAEMC,4BAdW,GAcIC,QAAQ,CAAC,YAAM;AACtC,yBAAOb,KAAK,CAACc,OAAN,CAAcC,UAArB;AACD,iBAFgC,CAdZ,EAkBjB;;AAlBiB;AAAA;;AAAA;AAAA;AAAA;AAoBjBb,uBAAO,CAACC,GAAR;;AApBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAXF,YAAW;AAAA;AAAA;AAAA,OAAjB;;AAwBA,WAAO;AACLL,UAAI,EAAJA,IADK;AAELK,kBAAY,EAAZA;AAFK,KAAP;AAID;AAtCY,CAAf","names":["axios","reactive","useRouter","useStore","setup","form","email","password","router","store","handleSubmit","console","log","post","response","token","data","sessionStorage","setItem","dispatch","user","trackCounter","computed","getters","getCounter"],"sourceRoot":"","sources":["/Users/macbookpro/Documents/projects/task-management-fe/src/views/Login.vue"],"sourcesContent":["<template>\n  <div\n    class=\"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\"\n  >\n    <div class=\"max-w-md w-full space-y-8\">\n      <div>\n        <img\n          class=\"mx-auto h-12 w-auto\"\n          src=\"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg\"\n          alt=\"Workflow\"\n        />\n        <h2 class=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n          Sign in to your account\n        </h2>\n        <p class=\"mt-2 text-center text-sm text-gray-600\">\n          Don't have an account yet?\n          <router-link to=\"/dashboard\" class=\"font-medium text-indigo-600 hover:text-indigo-500\">Create a new account</router-link>\n        </p>\n      </div>\n      <form @submit.prevent=\"handleSubmit\" class=\"mt-8 space-y-6\">\n        <input type=\"hidden\" name=\"remember\" value=\"true\" />\n        <div class=\"rounded-md shadow-sm -space-y-px\">\n          <div>\n            <label for=\"email-address\" class=\"sr-only\">Email address</label>\n            <input\n              v-model=\"form.email\"\n              id=\"email-address\"\n              name=\"email\"\n              type=\"email\"\n              autocomplete=\"email\"\n              required\n              class=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n              placeholder=\"Email address\"\n            />\n          </div>\n          <div>\n            <label for=\"password\" class=\"sr-only\">Password</label>\n            <input\n              v-model=\"form.password\"\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              autocomplete=\"current-password\"\n              required\n              class=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n              placeholder=\"Password\"\n            />\n          </div>\n        </div>\n\n        <div class=\"flex items-center justify-between\">\n          <div class=\"flex items-center\">\n            <input\n              id=\"remember-me\"\n              name=\"remember-me\"\n              type=\"checkbox\"\n              class=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n            />\n            <label for=\"remember-me\" class=\"ml-2 block text-sm text-gray-900\">\n              Remember me\n            </label>\n          </div>\n\n          <div class=\"text-sm\">\n            <a\n              href=\"#\"\n              class=\"font-medium text-indigo-600 hover:text-indigo-500\"\n            >\n              Forgot your password?\n            </a>\n          </div>\n        </div>\n\n        <div>\n          <button\n            type=\"submit\"\n            class=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n          >\n            <span class=\"absolute left-0 inset-y-0 flex items-center pl-3\">\n              <!-- Heroicon name: solid/lock-closed -->\n              <svg\n                class=\"h-5 w-5 text-indigo-500 group-hover:text-indigo-400\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n                aria-hidden=\"true\"\n              >\n                <path\n                  fill-rule=\"evenodd\"\n                  d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\"\n                  clip-rule=\"evenodd\"\n                />\n              </svg>\n            </span>\n            Sign in\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport { reactive } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from 'vuex';\n// import { api_url } from '../../utils/const';\n\nexport default {\n  setup() {\n    const form = reactive({\n      email: \"\",\n      password: \"\",\n    });\n\n    const router = useRouter()\n    const store = useStore()\n\n    const handleSubmit = async () => {\n      console.log(form);\n      try {\n        const response = await axios.post(\"http://127.0.0.1:8000/api/login\", {\n          ...form,\n        });\n        const token = response.data.token;\n\n        // console.log(response.data.user);\n\n        sessionStorage.setItem(\"token\", token);\n\n        store.dispatch(\"handleUserLogin\", response.data.user);\n\n        const trackCounter = computed(() => {\n      return store.getters.getCounter\n    })\n\n        // router.push({name: \"Dashboard\"});\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    return {\n      form,\n      handleSubmit,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.btn {\n  margin-right: 10px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}